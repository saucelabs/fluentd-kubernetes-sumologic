<match containers.**.fluentd**>
  @type null
</match>

<source>
  # https://docs.fluentd.org/v0.12/articles/in_multiprocess
  @type multiprocess

  # Inputs
  <process>
    cmdline -c /fluentd/conf.d/file/source.containers.conf --log /tmp/td-agent-in-containers.log -p /fluentd/plugins
  </process>
  <process>
    cmdline -c /fluentd/conf.d/file/source.docker.conf --log /tmp/td-agent-in-docker.log -p /fluentd/plugins
  </process>
  <process>
    cmdline -c /fluentd/conf.d/file/source.kubernetes.conf --log /tmp/td-agent-in-kubernetes.log -p /fluentd/plugins
  </process>

  # Filters & Outputs
  <process>
    # TCP:24001
    cmdline -c /fluentd/conf.d/out.sumo1.conf --log /tmp/td-agent-out1.log -p /fluentd/plugins
  </process>
  <process>
    # TCP:24002
    cmdline -c /fluentd/conf.d/out.sumo2.conf --log /tmp/td-agent-out2.log -p /fluentd/plugins
  </process>
  <process>
    # TCP:24003
    cmdline -c /fluentd/conf.d/out.sumo3.conf --log /tmp/td-agent-out3.log -p /fluentd/plugins
  </process>
  <process>
    # TCP:24004
    cmdline -c /fluentd/conf.d/out.sumo4.conf --log /tmp/td-agent-out4.log -p /fluentd/plugins
  </process>
</source>

<source>
  @type monitor_agent
  bind 0.0.0.0
  port 24220
</source>
